<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="levels.css">
    <title>Middle Mode</title>

    <style>
        /* Specific to this webpage*/
    /* an open flame in a box is not the best idea*/
        #flame {
            display: none;
        }
    /*moving the matchstick*/
        #matchStick {
            left: 20px;
            top: 535px;
        }
    </style>
</head>

<body>
    <div id="mobile">
        <h1 class="animated infinite rubberBand">Sorry! This site only works on desktop!</h1>
    </div>
    <div id="wrapper">

        <aside>
            <div id="back">
                <!-- Got Rid of timer for back button -->
                <a href="/igme230/interactive/Boom.html"><img src="/igme230/interactive/assets/Bombs/return.png" alt="Back Button"></a>

            </div>

            <div id="matchStick">
                <img id="match" src="/igme230/interactive/assets/Matches/Match.png" alt="The Match.">
                <img id="flame" src="/igme230/interactive/assets/Matches/Flame.png" alt="The Flame." class="animated infinite flash">
            </div>
            <div id="matchClick"></div>
            <img id="inside" src="/igme230/interactive/assets/Matches/MatchInsides.png" alt="inside MatchBox">
            <img id="outside" src="/igme230/interactive/assets/Matches/MatchBox.png" alt="outside MatchBox">
        </aside>
        <main>
            <div id="bombSquad">
                <img id="ticker" src="/igme230/interactive/assets/Bombs/ticker.png" alt="A sort of timer ticker">
                <img id="theBomb" src="/igme230/interactive/assets/Bombs/midBomb.png" alt="A rounded Bomb.">
                <div id="fuseSpot"><img id="fuse" src="/igme230/interactive/assets/Bombs/fuse.png" alt="A small lit fuse" class="animated infinite tada">
                </div>
            </div>
        </main>
    </div>
    <script src="levels.js"></script>
    <script>
        // webpage specific code.

        let lit = false;
        let rotateVal = 0;

//when match is picked up it lights itself and removes the box
        $("#match").mousedown(function () {
            $('#outside').addClass('animated fadeOutDown');
            $('#inside').addClass('animated fadeOutDown');
            $('#flame').css("display", "unset");
        });

        //clicking on the inside box will open it up allowing you to pick up the match
        $('#matchClick').click(function () {
            $('#inside').css('top', '160px');
            $('#outside').css('top', '20px');
            $('#matchStick').css('top', '440px');
            $('#matchClick').css('display', 'none');
        })


//So it keeps track of what number it has rotated and then rotates it to the next spot
        $("#ticker").click(function () {
            if (rotateVal == 0) {
                $('#ticker').css('transform', 'rotate(320deg)');
                rotateVal++;
            } else
            if (rotateVal == 1) {
                $('#ticker').css('transform', 'rotate(280deg)');
                rotateVal++;
            }else
            if (rotateVal == 2) {
                $('#ticker').css('transform', 'rotate(240deg)');
                rotateVal++;
            }else
            if (rotateVal == 3) {
                $('#ticker').css('transform', 'rotate(200deg)');
                rotateVal++;
            }else
            if (rotateVal == 4) {
                $('#ticker').css('transform', 'rotate(160deg)');
                rotateVal++;
            }else
            if (rotateVal == 5) {
                $('#ticker').css('transform', 'rotate(120deg)');
                rotateVal++;
            }else
            if (rotateVal == 6) {
                $('#ticker').css('transform', 'rotate(80deg)');
                rotateVal++;
            }else
            if (rotateVal == 7) {
                $('#ticker').css('transform', 'rotate(40deg)');
                rotateVal++;
            }else
            if (rotateVal == 8) {
                $('#ticker').css('transform', 'rotate(0deg)');
                rotateVal = 0;
            };

            //if the fuse is lit and it's rotated to a specific value then boom
            if (lit == true && rotateVal == 6) {
                window.location.replace("https://media.giphy.com/media/z9iE1SPAptyLK/giphy.gif");
            }
        });

        $("#match").mouseup(function () {
            //if the fuse is lit and it's rotated to a specific value then boom
            if (lit == true && rotateVal == 6) {
                window.location.replace("https://media.giphy.com/media/z9iE1SPAptyLK/giphy.gif");
            }});
    </script>
</body>

</html>